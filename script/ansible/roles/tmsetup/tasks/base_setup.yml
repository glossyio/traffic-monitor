---
# tmsetup base setup tasks
- name: Add TM user to sudo group
  become: true
  ansible.builtin.user:
    name: '{{ tmsetup_codeowner }}'
    groups: sudo
    append: true

- name: Run full update
  become: true
  ansible.builtin.apt:
    update_cache: true
    upgrade: full

- name: Set timezone
  become: true
  community.general.timezone:
    name: '{{ tmsetup_timezone }}'

- name: Create Directories
  ansible.builtin.file:
    path: '{{ item }}'
    state: directory
    mode: '0750'
    owner: '{{ tmsetup_codeowner }}'
  loop:
    - '{{ tmsetup_codehomedir }}'

- name: Install required packages
  become: true
  ansible.builtin.apt:
    name: '{{ tmsetup_packages }}'
    state: present
    update_cache: false
...
